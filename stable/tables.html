<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>CasaCore.Tables · CasaCore.jl documentation</title><link href="assets/documenter.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script></head><body><nav class="toc"><h1>CasaCore.jl</h1><form class="search" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Introduction</a></li><li><span class="toctext">Modules</span><ul><li class="current"><a class="toctext" href="tables.html">CasaCore.Tables</a><ul class="internal"><li><a class="toctext" href="#Columns-1">Columns</a></li><li><a class="toctext" href="#Cells-1">Cells</a></li><li><a class="toctext" href="#Keywords-1">Keywords</a></li><li><a class="toctext" href="#Subtables-1">Subtables</a></li></ul></li><li><a class="toctext" href="measures.html">CasaCore.Measures</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Modules</li><li><a href="tables.html">CasaCore.Tables</a></li></ul><a class="edit-page" href="https://github.com/mweastwood/CasaCore.jl/tree/54379f35b24f11bc789a23cddeb764cae2d71019/docs/src/tables.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/></header><h1><a class="nav-anchor" id="CasaCore.Tables-1" href="#CasaCore.Tables-1">CasaCore.Tables</a></h1><p>Load this module by running <code>using CasaCore.Tables</code>.</p><p>The <code>Tables</code> module is used to interact with CasaCore tables. This is a common data format in radio astronomy. For example CASA measurement sets and CASA calibration tables are simply CasaCore tables with a standard set of columns, keywords, and subtables.</p><p>Opening a table is simple:</p><pre><code class="language-julia">table = Table(&quot;/path/to/table&quot;)</code></pre><p>This will open an existing table at the given path, or create a new table if one does not already exist at that path. Note that a read/write lock is automatically obtained on an open table. This lock will automatically be released when the <code>table</code> object is garbage collected, but you may manually release the lock by calling <code>Tables.unlock(table)</code>.</p><h2><a class="nav-anchor" id="Columns-1" href="#Columns-1">Columns</a></h2><p>Columns are accessed by name. For example to read the entire <code>DATA</code> column from a measurement set:</p><pre><code class="language-julia">table = Table(&quot;/path/to/measurementset.ms&quot;)
data = table[&quot;DATA&quot;]</code></pre><p>If we have some function <code>calibrate</code> that solves for and applies a calibration to the measured visibilities, we can then write the calibrated data back to the <code>CORRECTED_DATA</code> column as follows:</p><pre><code class="language-julia">corrected_data = calibrate(data) # calibrate the measured visibilities
table[&quot;CORRECTED_DATA&quot;] = corrected_data</code></pre><p>Note that the <code>CORRECTED_DATA</code> column will be created in the table if it does not already exist. If the column does already exist, the column will be overwritten with the contents of <code>corrected_data</code>.</p><div class="admonition warning"><div class="admonition-title">Warning</div><div class="admonition-text"><p>CasaCore.jl will throw a <code>CasaCoreError</code> exception if you try to overwrite a column with an array of the incorrect size or element type. A column that contains <code>float</code>s cannot be overwritten with an array of <code>int</code>s.</p></div></div><p>A column can be removed from the table by using <code>Tables.removecolumn!(table, &quot;name&quot;)</code>, where <code>&quot;name&quot;</code> is the name of the column to be removed from the table.</p><h2><a class="nav-anchor" id="Cells-1" href="#Cells-1">Cells</a></h2><p>If you do not want to read or write to an entire column, you can instead pick a single row of the column (ie. a cell). For example, the length of the 123rd baseline in a measurement set can be computed by:</p><pre><code class="language-julia">uvw = table[&quot;UVW&quot;, 123]
baseline_length = norm(uvw)</code></pre><p>If we then perform a calculation that updates the <code>uvw</code> coordinates of this baseline, we can write these changes back to the table:</p><pre><code class="language-julia">table[&quot;UVW&quot;, 123] = uvw</code></pre><p>The number of rows in the table can be obtained with <code>Tables.numrows(table)</code>.  Note also that the indexing order is column first, row second. This is opposite from the usual matrix convention where the first index specifies the row.</p><div class="admonition warning"><div class="admonition-title">Warning</div><div class="admonition-text"><p>Julia is 1-indexed programming language. This means that the first element of an array <code>x</code> is accessed with <code>x[1]</code> instead of <code>x[0]</code> (as is the case for C and Python). Similarly, the first row of a table is row number 1. Attempting to access row number 0 will throw a <code>CasaCoreError</code> because this row does not exist.</p></div></div><h2><a class="nav-anchor" id="Keywords-1" href="#Keywords-1">Keywords</a></h2><p>Keywords are accessed using the <code>kw&quot;...&quot;</code> string macro. For example:</p><pre><code class="language-julia">ms_version = table[kw&quot;MS_VERSION&quot;]
table[kw&quot;MS_VERSION&quot;] = 2.0</code></pre><h2><a class="nav-anchor" id="Subtables-1" href="#Subtables-1">Subtables</a></h2><p>Subtables can be opened by reading their location from the appropriate keyword, and opening them as you would a regular table.</p><pre><code class="language-julia">location = table[kw&quot;SPECTRAL_WINDOW&quot;]
subtable = Table(location)</code></pre><footer><hr/><a class="previous" href="index.html"><span class="direction">Previous</span><span class="title">Introduction</span></a><a class="next" href="measures.html"><span class="direction">Next</span><span class="title">CasaCore.Measures</span></a></footer></article></body></html>
